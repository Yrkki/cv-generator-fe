<ng-container
  *ngIf="portfolioService.toolbarService.tagCloud===TagCloudDisplayMode.tagCloud || portfolioService.toolbarService.tagCloud===TagCloudDisplayMode.both">
  <span (keypress)="inputService.keypress($event)" (click)="engine.searchService.updateSearchToken($event)">
    <ng-container *ngFor="let frequency of truncated; let i = index; trackBy: trackByFn">
      <ng-container *ngIf="i > 0">&nbsp;{{ uiService.frequenciesDivider }} </ng-container>
      <span class='frequency'>
        <a [ngStyle]="getFrequencyStyle(frequency)" #clickable
          title="{{ frequency[1].Label + '\n\n' + portfolioService.model.portfolioModel.ui['Search for this']?.text }}"
          [attr.aria-label]="frequency[0]" href="">{{ frequency[0] }}</a>
      </span>
    </ng-container>
  </span>
  <ng-container *ngIf="remainingLength > 0">
    <span class="more">+{{ remainingLength }}&nbsp;moreâ€¦ </span>
  </ng-container>
</ng-container>
<ng-container
  *ngIf="portfolioService.toolbarService.tagCloud===TagCloudDisplayMode.chart || portfolioService.toolbarService.tagCloud===TagCloudDisplayMode.both">
  <div *ngIf="getFrequenciesCache(key)?.length || 0 > 0">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-12 cell-value">
          <canvas #canvas id="{{ portfolioService.model.portfolioModel.entities[key]?.chart }}"
            height="{{ chartHeight }}" width="{{ chartWidth }}" class="spectrum-chart" style="width: 100%;"></canvas>
        </div>
      </div>
    </div>
  </div>
</ng-container>