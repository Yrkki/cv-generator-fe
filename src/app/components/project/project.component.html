<div [ngClass]="portfolioService.getColumnsClass(portfolioService.entities['Project Portfolio']?.layoutColumns!)">
  <div [ngClass]="portfolioService.pagination ? 'tryKeepTogether' : ''">
    <div [ngClass]="portfolioService.getColumnsClass(portfolioService.entities['Gantt Chart']?.columns!)">
      <app-header key="Gantt Chart" [headingLevel]="2" [toggles]="[ToggleKind.ContentColumns]">
      </app-header>
      <div id="{{ portfolioService.entities['Gantt Chart']?.content }}" class="collapse show">
        <div [ngClass]="portfolioService.getColumnsClass(portfolioService.entities['Gantt Chart']?.contentColumns!)">
          <app-project-gantt-chart></app-project-gantt-chart>
        </div>
        <hr>
      </div>
    </div>
  </div>

  <div [ngClass]="portfolioService.pagination ? 'tryKeepTogether' : ''">
    <div>
      <app-header key="Contributions" [headingLevel]="2" [toggles]="[ToggleKind.ContentColumns]"></app-header>
      <div id="{{ portfolioService.entities['Contributions']?.content }}" class="collapse show">
        <div [ngClass]="portfolioService.getColumnsClass(portfolioService.entities['Contributions']?.contentColumns!)">
          <app-project-contributions></app-project-contributions>
        </div>
        <hr>
      </div>
    </div>
  </div>

  <div [ngClass]="portfolioService.pagination ? 'tryKeepTogether' : ''">
    <div [ngClass]="portfolioService.getColumnsClass(portfolioService.entities['List']?.columns!)">
      <app-header key="List" [headingLevel]="2" [toggles]="[ToggleKind.ContentColumns]"></app-header>
      <div id="{{ portfolioService.entities['List']?.content }}" class="collapse show">
        <div [ngClass]="portfolioService.getColumnsClass(portfolioService.entities['List']?.contentColumns!)">
          <app-project-list></app-project-list>
        </div>
        <hr>
      </div>
    </div>
  </div>

  <div [ngClass]="portfolioService.pagination ? 'tryKeepTogether' : ''">
    <div [ngClass]="portfolioService.getColumnsClass(portfolioService.entities['Index']?.columns!)">
      <app-header key="Index" [headingLevel]="2" [nextSortElement]="nextSort" [toggles]="[ToggleKind.ContentColumns]">
      </app-header>
      <div #nextSort id="{{ portfolioService.entities['Index']?.content }}" class="collapse show">
        <div [ngClass]="portfolioService.getColumnsClass(portfolioService.entities['Index']?.contentColumns!)">
          <app-project-index></app-project-index>
        </div>
        <hr>
      </div>
    </div>
  </div>
</div>

<div [ngClass]="portfolioService.pagination ? 'tryKeepTogether' : ''">
  <div [ngClass]="portfolioService.getColumnsClass(portfolioService.entities['Projects']?.columns!)">
    <app-header key="Projects" [headingLevel]="2" [toggles]="[ToggleKind.ContentColumns]">
    </app-header>
    <div id="{{ portfolioService.entities['Projects']?.content }}" class="collapse show">
      <div [ngClass]="portfolioService.getColumnsClass(portfolioService.entities['Projects']?.contentColumns!)">
        <div
          *ngFor="let project of truncatorService.truncated(sorterService.sorted(portfolioService.filtered.Projects)); let i = index; trackBy: trackByFn">
          <div [ngClass]="portfolioService.pagination ? 'tryKeepTogether' : ''">
            <h3 *ngIf="isInNaturalOrder()
              && portfolioService.getProjectStartsNewPeriod(project) 
              && portfolioService.entities.hasOwnProperty(portfolioService.getDecryptedProjectPeriod(project))"
              id="{{ portfolioService.entities[portfolioService.getDecryptedProjectPeriod(project)]?.key }}"
              [attr.aria-labelledby]="uiService.tabName(portfolioService.getDecryptedProjectPeriod(project))">
              <app-header-title [key]="portfolioService.getDecryptedProjectPeriod(project)"></app-header-title>
            </h3>
            <ng-container *ngComponentOutlet="ProjectCardComponent;injector:getInjector(project, i)">
            </ng-container>
          </div>
        </div>
        <ng-container *ngIf="truncatorService.remainingLength(portfolioService.filtered.Projects) > 0">
          <span class="more">+{{ truncatorService.remainingLength(portfolioService.filtered.Projects) }}&nbsp;moreâ€¦
          </span>
        </ng-container>
      </div>
    </div>
  </div>
</div>