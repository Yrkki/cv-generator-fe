<ng-template #badge let-key="key" let-index="index">
  <a href="{{ preprocessUrl(key?.Link) }}" title="{{ uiText(key?.Text) }}" target="_blank" rel="noopener noreferrer"
    attr.aria-label="linkLabel(uiText(key?.Text))">
    <img src="{{ preprocessUrl(key?.Image) }}" alt="{{ uiText(key?.Text) }}">
  </a>
</ng-template>

<div [ngClass]="portfolioService.getColumnsClass(entities[key]?.columns!)">
  <header id="{{ entities[key]?.key }}" #clickable (keypress)="keypress($event)" (click)="saveToggle($event)"
    data-toggle="collapse" [attr.data-target]="'#' + entities[key]?.content" [attr.aria-labelledby]="tabName(key)">
    <h1 [class.decorations]="decorations">
      <ng-container *ngTemplateOutlet="headerLink!;context:{key: key}"></ng-container>
      {{ entities[key]?.section }}
      <ng-container *ngTemplateOutlet="sectionCounter!;context:{count: entitiesService.getCountValue(key)}">
      </ng-container>

      <span class="toolbar">
        <form class="form-inline">
          <ng-container
            *ngTemplateOutlet="portfolioService.columnsToggles!;context:{key: portfolioService.entities[key]?.key}">
          </ng-container>
          <app-expand-toggle [key]="key" [(ngModel)]="Expand" [ngModelOptions]="{standalone: true}" ngDefaultControl
            class="d-print-none extra-function"></app-expand-toggle>
        </form>
      </span>
    </h1>
  </header>
  <div id="{{ entities[key]?.content }}" class="collapse show">
    <div [ngClass]="portfolioService.getColumnsClass(entities[key]?.contentColumns!)">
      <div class="disclaimer center">
        <span [ngClass]="'row'" style="height: 2px;">&nbsp;</span>
        <span [ngClass]="Expand?'row justify-content-center':''" *ngFor='let group of Config; trackBy: trackByFn'>
          <ng-container>&nbsp;</ng-container>
          <ng-container *ngFor="let Config of group; trackBy: trackByFn">
            <ng-container *ngTemplateOutlet="badge!;context:{key: Config}"></ng-container>
          </ng-container>
        </span>
        <div [ngClass]="'row justify-content-center'">&nbsp;
          <div class="table table-condensed list-row" [ngClass]="portfolioService.pagination ? 'tryKeepTogether' : ''">
            <div class="td">
              <a class="td-a" href="https://cvgenerator.tk"
                attr.aria-label="linkLabel(uiText('CV Generator architecture'))">
                <img class="w-100"
                  src="https://cv-generator-project-server.herokuapp.com/images/assets/CV%20Generator%20architecture.png"
                  onerror="style.display='none'" alt="" />
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <hr>
  </div>
</div>